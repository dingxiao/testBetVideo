<html>
  <head>
    <title>IMA HTML5 Player</title>
    <style type="text/css">
        #mainContainer {
          position: relative;
          width: 640px;
          height: 360px;
        }
        
        #content, #adContainer {
          position: absolute;
          top: 0px;
          left: 0px;
          width: 640px;
          height: 360px;
        }
        
        #contentElement {
          width: 640px;
          height: 360px;
          overflow: hidden;
        }
        
        #playButton {
          margin-top:10px;
          vertical-align: top;
          width: 350px;
          height: 60px;
          padding: 0;
          font-size: 22px;
          color: white;
          text-align: center;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.25);
          background: #2c3e50;
          border: 0;
          border-bottom: 2px solid #22303f;
          cursor: pointer;
          -webkit-box-shadow: inset 0 -2px #22303f;
          box-shadow: inset 0 -2px #22303f;
        }    
    </style>
  </head>

  <body>
    
    <h2>test video from youtube</h2>
    <div style="width:500px; height:400px;">
    <video id="contentElement" class="_mnmb _mmdb" controls="true" x-webkit-airplay="allow" data-youtube-id="qtsNbxgPngA" title="Jimmy Fallon&nbsp;Blew a Chance to Date Nicole Kidman"  ></video>
    </div>
    <button id="playButton">Play</button>
    <!-- 
    <script type="text/javascript" src="//imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
     -->
    <script src="http://s0.2mdn.net/instream/html5/ima3_debug.js"></script>
    <script type="text/javascript" >
    var youTubesrc="http://r16---sn-p5qlsm7r.googlevideo.com/videoplayback?sver=3&amp;app=youtube_mobile&amp;yms=KmXNdd1zVPg&amp;mt=1423075576&amp;pl=21&amp;mv=m&amp;ms=au&amp;signature=4EEB439274F3C9D23AA2A82202F27E15EFF8957D.77503CAB7FCB99ECB5CC8622D630C488683BBC0F&amp;key=yt5&amp;mm=31&amp;id=o-AAWQ635odnvYqSqfc1cmyEbP7qwb5ysxwhwQnyWdHCUm&amp;el=watch&amp;source=youtube&amp;ip=38.104.236.154&amp;fexp=904847%2C907263%2C913441%2C914924%2C916601%2C927622%2C930676%2C931361%2C943917%2C947225%2C948124%2C952302%2C952605%2C952612%2C952901%2C955301%2C957201%2C959701&amp;itag=18&amp;dnc=1&amp;initcwndbps=1182500&amp;ratebypass=yes&amp;ipbits=0&amp;expire=1423097262&amp;sparams=id%2Cinitcwndbps%2Cip%2Cipbits%2Citag%2Cmm%2Cms%2Cmv%2Cnh%2Cpl%2Cratebypass%2Csource%2Cupn%2Cexpire&amp;upn=LJWrtZtITx4&amp;nh=EAM&amp;cpn=23cUV5FYLF7NZl_k&amp;ptk=NBCU_Shows&amp;oid=NDVoivKqNStbe-D9hFASEw&amp;ptchn=8-Th83bH_thdKZDJCrn88g&amp;pltype=content&amp;c=MWEB&amp;cver=html5";
    var BrowserUtils = {},
    query = {},
    ub = BrowserUtils,
    ua = navigator.userAgent,
    queryNameVals = window.location.search.substring(1).split("&amp;").join("&").split("&");

    for (var i=0; i<queryNameVals.length; i++){
    var queryNameVal = queryNameVals[i].split("=");
    query[queryNameVal[0]] = queryNameVal[1];
    }
    
    var videoURL = decodeURIComponent(query.video),
    adURL = decodeURIComponent(query.adTag),
    posterURL = decodeURIComponent(query.poster);
    
    ub.isWebkit = ua.indexOf("WebKit") !== -1;
    ub.isChrome = ua.indexOf("Chrome") !== -1;
    ub.isIpad = ua.indexOf("iPad") !== -1;
    ub.isIphone = ua.indexOf("iPhone") !== -1;
    ub.isAndroid = ua.indexOf("Android") !== -1;
    ub.isUIWebView = /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(ua)
    ub.isDesktopWebkit = ub.isWebkit && !ub.isIpad && !ub.isIphone;
    console.log(ua);
    
    console.log('video src=' + videoURL);
    console.log('query adURL=' + adURL);

 var adsManager;
 var adsLoader;
 var adDisplayContainer;
 var intervalTimer;
 var playButton;
 var videoContent;
 //var contentEndedListener
 var requestAdsDone = false;
 var videoStarted = false;
 var videoLoadedMetadata = false;
 var adsLoaded = false;
 var lastPauseTime = 0;

function init() {
       videoContent = document.getElementById('contentElement');
       videoContent.src = videoURL;
       if (posterURL) {
    	   videoContent.poster = posterURL;
       }
       requestAdsDone = false;
       playButton = document.getElementById('playButton');
       // Listen for click events from the play button or the player
       videoContent.addEventListener('play', clickHandler, false);
       //playButton.addEventListener('click',clickHandler, false);
}
function clickHandler(){
    // Listen for the loadedmetadata event to seek the video after mid-rolls
    videoContent.addEventListener('loadedmetadata', loadedMetadataHandler);
	   videoContent.load();
	   //need this???? no, this will start video wiout ad
	   //videoContent.play();
}
function loadedMetadataHandler() {
    videoContent.removeEventListener('play', clickHandler, false);
    videoContent.removeEventListener('loadedmetadata', loadedMetadataHandler, false);
    videoContent.play();
    if (videoContent.seekable.length) {
        // Video is in a seekable state
    	//videoContent.play();
    	console.log('video seekable');
    } else {
        // Video isn't seekable yet, try again in 100ms
        //setTimeout(loadedMetadataHandler, 500);
    	console.log('video NOT seekable');
    }
};

 // Wire UI element references and UI event listeners.
 init();
    </script>
  </body>
</html>